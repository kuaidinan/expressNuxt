{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../serverTs/controller/connect/index.ts"],"names":[],"mappings":"AAAA,YAAY,CAAC;;;;;;;;;;AAGb,MAAM,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAA;AAC5B,MAAM,OAAO,GAAG,OAAO,CAAC,SAAS,CAAC,CAAA;AAClC;IACQ,SAAS,CAAC,GAAW,EAAC,GAAY;;YACtC,IAAI,CAAC;gBACH,IAAI,MAAM,GAAI,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC;oBACnC,IAAI,EAAK,kBAAkB;oBAC3B,QAAQ,EAAC,kBAAkB;oBAC3B,IAAI,EAAK,aAAa;oBAEtB,GAAG,EAAE,EAAC,OAAO,EAAE,OAAO,EAAC;iBACxB,CAAC,CAAC;gBACH,IAAI,OAAO,GAAG;oBACV,IAAI,EAAK,MAAM;oBACf,IAAI,EAAK,kBAAkB;oBAC3B,EAAE,EAAO,mBAAmB;oBAC5B,OAAO,EAAE,MAAM;oBACf,UAAU,EACV;wBACE,EAAC,IAAI,EAAE,6GAA6G,EAAE,WAAW,EAAC,IAAI,EAAC;wBACvI,EAAC,IAAI,EAAC,IAAI,CAAC,IAAI,CAAC,SAAS,EAAC,6BAA6B,CAAC,EAAE,IAAI,EAAC,iBAAiB,EAAE,IAAI,EAAC,aAAa,EAAC;wBACrG,EAAC,IAAI,EAAC,IAAI,CAAC,IAAI,CAAC,SAAS,EAAC,iCAAiC,CAAC,EAAE,IAAI,EAAC,WAAW,EAAE,OAAO,EAAC,EAAC,YAAY,EAAC,YAAY,EAAC,EAAC;qBACrH;iBACJ,CAAA;gBAGD,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,UAAS,GAAO,EAAE,OAAW;oBAE9C,EAAE,CAAA,CAAC,GAAG,CAAC,CAAC,CAAC;wBACP,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAA;wBAChB,GAAG,CAAC,IAAI,CAAC,EAAC,IAAI,EAAC,QAAQ,EAAC,CAAC,CAAA;oBAC3B,CAAC;oBACD,GAAG,CAAC,IAAI,CAAC,EAAC,IAAI,EAAC,QAAQ,EAAC,CAAC,CAAA;oBACzB,OAAO,CAAC,GAAG,CAAC,GAAG,IAAI,OAAO,CAAC,CAAC;gBAChC,CAAC,CAAC,CAAC;YACL,CAAC;YAAC,KAAK,CAAA,CAAC,GAAG,CAAC,CAAC,CAAC;gBACZ,MAAM,IAAI,KAAK,CAAC,GAAG,CAAC,CAAA;YACtB,CAAC;QACH,CAAC;KAAA;CACF;AArCD,0BAqCC","sourcesContent":["'use strict';\r\n\r\nimport { Request,Response,NextFunction } from 'express'\r\nconst path = require('path')\r\nconst emailjs = require('emailjs')\r\nexport default class Connect {\r\n  async sendEmail(req:Request,res:Response) {\r\n    try {\r\n      let server  = emailjs.server.connect({\r\n        user:    \"352789535@qq.com\",      // 你的QQ用户\r\n        password:\"ibyeupfdfuoocahb\",           // 注意，不是QQ密码，而是刚才生成的授权码\r\n        host:    \"smtp.qq.com\",         // 主机，不改\r\n        // ssl:\t\ttrue,\r\n        tls: {ciphers: \"SSLv3\"}\r\n      });\r\n      let message = {\r\n          text:    \"邮件内容\",       //邮件内容\r\n          from:    \"352789535@qq.com\",        //谁发送的\r\n          to:      \"1936476416@qq.com\",       //发送给谁的\r\n          subject: \"邮件主题\",          //邮件主题\r\n          attachment: \r\n          [\r\n            {data: \"<html>i <i>hope</i> this works! here is an image: <img src='cid:my-image' width='100' height ='50'> </html>\", alternative:true},\r\n            {path:path.join(__dirname,'../../../assets/img/123.rar'), type:\"application/rar\", name:\"renamed.rar\"},\r\n            {path:path.join(__dirname,'../../../assets/img/poster1.jpg'), type:\"image/jpg\", headers:{\"Content-ID\":\"<my-image>\"}}\r\n          ]\r\n      }\r\n    \r\n      //开始发送邮件\r\n      server.send(message, function(err:any, message:any) {\r\n          //回调函数\r\n          if(err) {\r\n            console.log(err)\r\n            res.send({text:'邮件返回失败'})\r\n          }\r\n          res.send({text:'邮件返回成功'})\r\n          console.log(err || message);\r\n      });\r\n    } catch(err) {\r\n      throw new Error(err)\r\n    }\r\n  }\r\n}"]}