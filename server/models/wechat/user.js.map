{"version":3,"file":"user.js","sourceRoot":"","sources":["../../../serverTs/models/wechat/user.ts"],"names":[],"mappings":";;AAAA,qCAAqC;AACrC,MAAM,kBAAkB,GAAG,OAAO,CAAC,oBAAoB,CAAC,CAAA;AAExD,MAAM,MAAM,GAAG,QAAQ,CAAC,MAAM,CAAC;AAE/B,MAAM,WAAW,GAAG,IAAI,MAAM,CAAC;IAC9B,MAAM,EAAE;QACP,IAAI,EAAE,MAAM;QACZ,QAAQ,EAAE,IAAI;QACd,KAAK,EAAE;YACN,MAAM,EAAE,IAAI;SACZ;KACD;IACD,QAAQ,EAAE,MAAM;IAChB,GAAG,EAAE,MAAM;IACX,QAAQ,EAAE,MAAM;IAChB,IAAI,EAAE,MAAM;IACZ,QAAQ,EAAE,MAAM;IACf,OAAO,EAAE,MAAM;IACf,UAAU,EAAE,MAAM;IACnB,SAAS,EAAE,KAAK;IAChB,UAAU,EAAC;QACV,IAAI,EAAE,IAAI;QACV,SAAS,EAAE,IAAI,CAAC,GAAG;KACnB;IACA,OAAO,EAAE,IAAI;CACd,CAAC,CAAA;AAWF,WAAW,CAAC,MAAM,CAAC,kBAAkB,EAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAA;AAEtD,WAAW,CAAC,KAAK,CAAC,EAAC,EAAE,EAAC,CAAC,EAAC,CAAC,CAAC;AAG1B,MAAM,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC,OAAO,EAAE,WAAW,CAAC,CAAC;AAEnD,kBAAe,KAAK,CAAC","sourcesContent":["import * as mongoose from 'mongoose';\r\nconst lastModifiedPlugin = require('../core/lastModify')\r\n\r\nconst Schema = mongoose.Schema;\r\n\r\nconst usersSchema = new Schema({\r\n\topenid: {\r\n\t\ttype: String,\r\n\t\trequired: true,\r\n\t\tindex: {\r\n\t\t\tunique: true\r\n\t\t}\r\n\t},\r\n\tnickname: String,\r\n\tsex: Number,\r\n\tlanguage: String,\r\n\tcity: String,\r\n\tprovince: String,\r\n  country: String,\r\n  headimgurl: String,\r\n\tprivilege: Array,\r\n\tcreated_at:{\r\n\t\ttype: Date,\r\n\t\t\"default\": Date.now\r\n\t},\r\n  lastMod: Date,\r\n})\r\n\r\n// usersSchema.pre('save',function(this:any,next) {\r\n// \tconst now = new Date();\r\n//   this.updated_at = now;\r\n//   if ( !this.created_at ) {\r\n//     this.created_at = now;\r\n//   }\r\n//   next();\r\n// })\r\n\r\nusersSchema.plugin(lastModifiedPlugin,{ index: true })\r\n\r\nusersSchema.index({id:1});\r\n\r\n\r\nconst Users = mongoose.model('Users', usersSchema);\r\n\r\nexport default Users;"]}